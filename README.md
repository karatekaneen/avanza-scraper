<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [AvanzaScraper][1]
-   [Usage][2]
-   [scraper][3]
    -   [Parameters][4]
    -   [createScraper][5]
        -   [Parameters][6]
-   [openListMenu][7]
-   [selectActiveLists][8]
    -   [Parameters][9]
-   [showMoreStocks][10]
-   [extractTableData][11]
-   [sleep][12]
    -   [Parameters][13]

## AvanzaScraper

This app scrapes all the stocks from Avanzas page of stock lists. It extracts the `id` and `linkName` properties which are needed to fetch the price data later on. It also grabs the name and which list the stock belongs to.

## Usage

For basic usage and scrape the default lists it is only needed to run `index.js`.

## scraper

This is the main scraper function.
It loads the page, selects what lists to take the stocks from and extracts the data from the table.

### Parameters

-   `params` **[Object][14]** 
    -   `params.listsToSave` **[Array][15]&lt;[String][16]>** The lists we want to save (optional, default `['Mid Cap Stockholm','Small Cap Stockholm']`)
    -   `params.url` **[String][16]** Url to the page we want to scrape (optional, default `'https://www.avanza.se/aktier/lista.html'`)
    -   `params.headless` **[Boolean][17]** Run the browser in headless mode or not (optional, default `true`)
    -   `params.sleepTime` **[Number][18]** The time to sleep inbetween trying to load more data. Increase this if all data isn't being loaded before moving forward. (optional, default `1000`)

Returns **[Array][15]&lt;[Object][14]>** Array with all the scraped data

### createScraper

Factory function for the scraper.

#### Parameters

-   `deps` **[Object][14]** 
    -   `deps.puppeteer` **[Function][19]** The puppeteer library (optional, default `require('puppeteer')`)
    -   `deps.siteActions` **[Object][14]** Collection of helper functions to extract data from the page (optional, default `require('./siteActions')`)
    -   `deps.sleep` **[Function][19]** Sleep function (optional, default `require('./helpers').sleep`)

## openListMenu

Opens the menu on top of the page to select what
lists of stocks that should be included in the table.

Returns **void** 

## selectActiveLists

Select what lists to scrape the data for and click the selector for that one.

### Parameters

-   `lists` **[Array][15]&lt;[String][16]>** The names of the lists we want to scrape. - **Case sensitive for now**

Returns **void** 

## showMoreStocks

Click the "show more" button to load the remaining stocks.
When there is no more stocks to load the display-property of the button is
changed to "none" so we check if it's still "inline-block" and if so click it.

Returns **void** 

## extractTableData

Extracts the data from the table of stocks.

Returns **[Array][15]&lt;[Object][14]>** all the stocks in the list

## sleep

Take a timeout to wait for content to load

### Parameters

-   `milliseconds` **[Number][18]** number of milliseconds to wait

Returns **[Promise][20]&lt;void>** 

[1]: #avanzascraper

[2]: #usage

[3]: #scraper

[4]: #parameters

[5]: #createscraper

[6]: #parameters-1

[7]: #openlistmenu

[8]: #selectactivelists

[9]: #parameters-2

[10]: #showmorestocks

[11]: #extracttabledata

[12]: #sleep

[13]: #parameters-3

[14]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[15]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[16]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String

[17]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean

[18]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[19]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[20]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise
